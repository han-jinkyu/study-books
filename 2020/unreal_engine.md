# 실전 게임 제작으로 배우는 언리얼 엔진4

## 책 구매
- [리디북스](https://ridibooks.com/books/443000408)

----

## 게임 개발 단계
1. 프로토타입 단계
   - 정식 개발에 들어가기 전에 `게임의 재미`를 증명하는 단계
2. 프리프로덕션 단계
   - 실제 제품에 원하는 수준의 물건을 만들면서 워크플로우를 검증하고 개선하는 단계
3. 프로덕션 단계
   - 게임을 제대로 제작하는 단계

## 그레이박싱
- `그레이박스`: 게임의 재미를 증명하기 위해 정식 수준의 애셋을 사용하지 않고 만드는 맵
- `그레이박싱`: 게임의 본질에 주목하여 빠른 속도로 만들어보는 공정
- `BSP(binary space partitioning)`
  - 간단한 모델링 기능
  - 레벨 아이디어의 시안을 빠르게 만들어 볼 수 있다
  - BSP 기능으로 만드는 형상을 `브러시`라고 부른다
- 브러시의 불리언 연산을 이용하여 테스트 해볼 수 있다. 하지만 버그의 원인이 되기도 하므로 주의를 기울여야 된다.
  - 브러시 불리언 연산은 모델링을 위한 것이 아니다.
  - 더하기 브러시와 빼기 브러시는 순서가 중요하다.
  - 입체성을 설정할 수 있다.
    - 반입체: 불리언 연산이 일어나지 않는다. 즉 빼기 브러시의 영향을 받지 않는다.
    - 비입체: 반입체와 비슷하지만 콜리전 판정에 반응하지 않는다.

## 사용자 정의 애셋 임포트
- `임포트`: 외부 툴에서 제작한 애셋을 UE4의 데이터 형식으로 변환하는 과정
- `텍스쳐`: 머티리얼(material; 재질을 의미)에 사용하는 패턴 데이터
- `메시` + `머티리얼` + `텍스쳐` = 우리가 보는 물체
- `콜리전`: 충돌 판정을 담당하는 구역 생성
  - 프리미티브 콜리전: 구체, 박스, 캡슐 (단순, 부하 적음)
  - K면체 콜리전: 10면체 X, 10면체 Y, 10면체 Z (복잡, 부하 큼)
  - 자동 컨벡스 콜리전(convex collision): 완벽하지만 부하 매우 큼

## 메싱
- 그레이박싱을 통해 게임의 재미를 검증했다면 그레이박스를 완성에 가까운 에셋으로 교체해야 하는데 이를 `메싱`이라고 한다
- 그레이박스를 제거하고 메시로 교체하는 과정에서 게임을 파손시키는 일이 발생한다
  - 이를 위한 한 가지 방법으로 그레이박스를 보이지 않게 남겨두고 충돌 역할을 그대로 둔다
  - 추가하는 정식 메시는 충돌하지 않게 한다
- `내비게이션 메시`
  - 메싱 작업의 기준이 된다
- `레벨 스트리밍`: 게임 플레이 중에 아직 읽어 들이지 않은 에리어를 차근차근 읽어 들이는 기능
  - 로드 시간을 짧게 느끼게 해준다
  - 메모리를 절약할 수 있다
  - 레벨 에디터에서 여러 사람의 작업을 분담할 수 있게 해준다

## 블루프린트
- UE4에서 지원하는 게임 스크립트 환경
- 블루프린트에는 2종류가 존재한다
  - `레벨 블루프린트`: 맵과 함께 저장되는 블루프린트. 맵에 배치한 액터를 직접 사용해서 맵 고유의 시나리오 또는 장치를 표현할 수 있다. 단 맵에 종속된다.
  - `클래스 블루프린트`: 애셋(asset)이므로 여러 맵에서 사용할 수 있다. 부모 클래스를 기반으로 새로운 기능을 추가해서 원하는 것을 만든다.
- 액터를 움직이는 방법에는 여러 가지가 있다
  1. 좌표를 매 프레임마다 변경해서 움직이기
     - Tick마다 액터를 이동한다
     - 등속도로 직선을 움직일 때는 간단하지만 게임에서 등속 직선 운동하는 액터가 그리 많지 않다
  2. 이동 컴포넌트에 파라미터를 전달해서 움직이기
     - `이동 컴포넌트(MovementComponent)`를 이용한다
  3. 시퀀서로 결정한 좌표를 변경해서 움직이기
     - 좌표 또는 방향을 가진 키 프레임을 이용한다
     - `마티네(Matinee)`와 `타임라인(Timeline)`이라는 기능을 제공한다 
  4. 물리 엔진을 사용해서 움직이기
     - NVidia의 PhysX가 통합되어 있다

## 하드웨어 입력
- `디지털 입력`과 `아날로그 축 입력`이 있다
  - `디지털 입력`: 누르는 상태(on)과 누르지 않는 상태(off)만 존재하는 입력
  - `아날로그 축 입력`: 마우스의 이동 거리 또는 게임패드의 아날로그 스틱 같은 입력
- UE4에서 다루는 하드웨어 입력은 다음과 같다
  - 키보드, 게임패드, 마우스, 기타
- `폰(Pawn)`: 넓은 의미로 사람이 조작하는 것이란 뜻. 
- `컨트롤러(Controller)`: 폰을 운용하는 데 필요한 요소.


## 스켈레탈 메시
- 관절을 사용하여 만든 것을 `스켈레탈 메시(skeletal mesh)`라고 한다
- 그렇지 않은 것은 `스태틱 메시(static mesh)`라고 한다

## 피직스 애셋
- 일반적으로 애니메이션을 가진 스켈레탈 메시의 콜리전은 전체를 대상으로 하지 않고 관절 사이에 캡슐 콜리전이나 박스 콜리전을 추가해 애니메이션과 함께 움직이게 한다
- UE4에서는 이러한 애니메이션 대응 콜리전 데이터를 `피직스 애셋(physic asset)`이라 부른다

## 콜리전
- `블록(block)`: 차와 차의 충돌처럼 물리적인 현상이 일어나는 것.
- `오버랩(overlap)`: 물리적인 현상이 일어나지 않고 단순히 겹치는 것만 검출하는 것.
- `트리거(trigger)`: 게임의 물리적인 움직임에는 간섭하지 않고 게임 로직의 시발점이 되는 것.

## 타임라인
- 정해진 시간에 정해진 대로 영상을 변화시키기 위한 기능.
- 언리얼 에디터에서는 블루프린트 스크립트를 통해 활용할 수 있다.
- `부동소수점(Float)`, `벡터`, `색상`을 기반으로 키를 만들 수 있다.
  - `이벤트`라는 트랙도 존재한다.
- 위치는 X,Y,Z를 나타내는 3개의 Float값이 필요하므로, Float 트랙만으로는 위치를 조정할 수 없다. 하지만 두 점 사이의 애니메이션이라면 `Float 트랙과 Lerp의 조합`으로 다양하게 활용할 수 있다.
- `Lerp`는 `선형 보간(linera interpolation)`으로 지정한 두 점 사이의 값을 직선으로 보완한다.
- 3차원 좌표를 사용한 복잡한 움직임을 구현할 때는 3차원 키를 사용하는 `벡터(vector) 트랙`을 사용하는 것이 편리하다.

## 이벤트
- 현재까지는 UE4에서 표준적으로 제공하는 이벤트를 사용해왔다. (BeginPlay, Tick 등)
- 이벤트를 기반으로 개발하는 방법을 `이벤트 구동(event driven)`이라고 부른다.
- `사용자 정의 이벤트`를 구성하여 만들 수 있다.
- `이벤트 디스패처`를 통하여 이벤트 통지도 구현할 수 있다.

---
[메인으로](README.md)
